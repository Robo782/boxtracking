import{a as u,r as n,j as e,L as m}from"./index-Bq4TFxoM.js";function f(){const{id:r}=u(),[s,h]=n.useState(null),[a,d]=n.useState(null),[c,x]=n.useState("");return n.useEffect(()=>{(async()=>{try{const i={Authorization:`Bearer ${localStorage.getItem("token")}`},[o,l]=await Promise.all([fetch(`/api/boxes/${r}`,{headers:i}),fetch(`/api/boxes/${r}/history`,{headers:i})]);if(!o.ok)throw new Error("Box existiert nicht");if(!l.ok)throw new Error("Keine Historie gefunden");d(await o.json()),h(await l.json())}catch(t){x(t.message)}})()},[r]),c?e.jsx("p",{className:"p-6 text-error",children:c}):a?e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["Verlauf – ",a.serial," ",e.jsx("span",{className:"opacity-60",children:a.type})]}),(s==null?void 0:s.length)===0&&e.jsx("p",{children:"Noch keine Historie."}),(s==null?void 0:s.length)>0&&e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Datum"}),e.jsx("th",{children:"Aktion"}),e.jsx("th",{children:"Bemerkung"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:new Date(t.timestamp).toLocaleString()}),e.jsx("td",{children:e.jsx("span",{className:`badge badge-${j(t.action)}`,children:t.action})}),e.jsx("td",{children:t.comment||"—"})]},t.id))})]}),e.jsx(m,{to:`/box/${a.serial}`,className:"link block mt-4",children:"← zurück"})]}):e.jsx("p",{className:"p-6",children:"Lade …"})}function j(r){switch(r){case"load":return"primary";case"return":return"accent";case"check":return"success";default:return"neutral"}}export{f as default};
//# sourceMappingURL=boxhistory-DMzvrnYZ.js.map
