{"version":3,"file":"api-B34wtib_.js","sources":["../../src/utils/api.js"],"sourcesContent":["/**\r\n * Zentraler Fetch-Wrapper mit Auto-Logout bei 401/403.\r\n * Verwende in allen Pages statt fetch(): api(url, opts)\r\n */\r\nexport async function api(url, opts = {}) {\r\n  const token = localStorage.getItem(\"token\");\r\n  const headers = {\r\n    ...(opts.headers || {}),\r\n    Authorization: `Bearer ${token}`,\r\n  };\r\n\r\n  const res = await fetch(url, { ...opts, headers });\r\n\r\n  if (res.status === 401 || res.status === 403) {\r\n    // Session invalid → alles löschen & zum Login\r\n    localStorage.clear();\r\n    window.location.href = \"/login\";\r\n    throw new Error(\"Session expired\");\r\n  }\r\n  return res;\r\n}\r\n"],"names":["api","url","opts","token","headers","res"],"mappings":"AAIO,eAAeA,EAAIC,EAAKC,EAAO,GAAI,CACxC,MAAMC,EAAQ,aAAa,QAAQ,OAAO,EACpCC,EAAU,CACd,GAAIF,EAAK,SAAW,GACpB,cAAe,UAAUC,CAAK,EAClC,EAEQE,EAAM,MAAM,MAAMJ,EAAK,CAAE,GAAGC,EAAM,QAAAE,CAAO,CAAE,EAEjD,GAAIC,EAAI,SAAW,KAAOA,EAAI,SAAW,IAEvC,mBAAa,MAAK,EAClB,OAAO,SAAS,KAAO,SACjB,IAAI,MAAM,iBAAiB,EAEnC,OAAOA,CACT"}