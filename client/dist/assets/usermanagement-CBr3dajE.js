import{r as l,j as e}from"./index-Bq4TFxoM.js";import{a}from"./api-B34wtib_.js";function f(){const[i,d]=l.useState([]),[n,t]=l.useState({username:"",password:"",role:"user"}),[o,c]=l.useState(""),r=()=>a("/api/admin/users").then(s=>s.json()).then(d).catch(()=>c("Konnte Userliste nicht laden"));l.useEffect(r,[]);async function m(s){s.preventDefault(),await a("/api/admin/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n.username,password:n.password||"changeme",role:n.role})}),t({username:"",password:"",role:"user"}),r()}const u=s=>confirm("PW auf 'changeme' setzen?")&&a(`/api/admin/users/${s}/reset`,{method:"PUT"}).then(r),h=(s,x)=>a(`/api/admin/users/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({role:x==="admin"?"user":"admin"})}).then(r),p=s=>confirm("User wirklich löschen?")&&a(`/api/admin/users/${s}`,{method:"DELETE"}).then(r);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Benutzerverwaltung"}),e.jsxs("form",{onSubmit:m,className:"card bg-base-100 p-4 max-w-md space-y-4",children:[e.jsx("h2",{className:"font-semibold",children:"Neuer Benutzer"}),e.jsx("input",{name:"username",id:"username",className:"input input-bordered w-full",placeholder:"Username",value:n.username,onChange:s=>t({...n,username:s.target.value}),required:!0}),e.jsx("input",{name:"password",id:"password",className:"input input-bordered w-full",placeholder:"Passwort (optional)",type:"password",value:n.password,onChange:s=>t({...n,password:s.target.value})}),e.jsxs("select",{name:"role",id:"role",className:"select select-bordered w-full",value:n.role,onChange:s=>t({...n,role:s.target.value}),children:[e.jsx("option",{value:"user",children:"user"}),e.jsx("option",{value:"admin",children:"admin"})]}),e.jsx("button",{className:"btn btn-primary w-full",children:"Anlegen"})]}),o&&e.jsx("p",{className:"text-error",children:o}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"User"}),e.jsx("th",{children:"Rolle"}),e.jsx("th",{children:"Aktionen"})]})}),e.jsx("tbody",{children:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.username}),e.jsx("td",{children:s.role}),e.jsxs("td",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>h(s.id,s.role),className:"btn btn-xs",children:"Rolle ↺"}),e.jsx("button",{onClick:()=>u(s.id),className:"btn btn-xs",children:"PW-Reset"}),e.jsx("button",{onClick:()=>p(s.id),className:"btn btn-error btn-xs",children:"✕"})]})]},s.id))})]})]})}export{f as default};
//# sourceMappingURL=usermanagement-CBr3dajE.js.map
