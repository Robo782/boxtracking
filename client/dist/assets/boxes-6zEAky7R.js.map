{"version":3,"file":"boxes-6zEAky7R.js","sources":["../../src/components/FilterBar.jsx","../../src/pages/boxes.jsx"],"sourcesContent":["// client/src/components/FilterBar.jsx\r\nexport default function FilterBar({\r\n  status, setStatus,\r\n  type,   setType,\r\n  query,  setQuery\r\n}) {\r\n  return (\r\n    <div className=\"flex flex-wrap gap-2 items-center\">\r\n      {/* Status-DropDown */}\r\n      <select\r\n        className=\"select select-sm select-bordered\"\r\n        value={status}\r\n        onChange={e=>setStatus(e.target.value)}\r\n      >\r\n        <option value=\"all\">Alle Status</option>\r\n        <option value=\"Verf√ºgbar\">Verf√ºgbar</option>\r\n        <option value=\"Unterwegs\">Unterwegs</option>\r\n        <option value=\"R√ºcklauf\">R√ºcklauf</option>\r\n      </select>\r\n\r\n      {/* Typ-DropDown */}\r\n      <select\r\n        className=\"select select-sm select-bordered\"\r\n        value={type}\r\n        onChange={e=>setType(e.target.value)}\r\n      >\r\n        <option value=\"all\">Alle Typen</option>\r\n        <option value=\"PU-S\">PU-S</option>\r\n        <option value=\"PU-M\">PU-M</option>\r\n        <option value=\"PR-M\">PR-M</option>\r\n      </select>\r\n\r\n      {/* Textsuche */}\r\n      <label className=\"input input-sm input-bordered flex-1 max-w-xs\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"PCC-ID / Device-Serial\"\r\n          className=\"grow\"\r\n          value={query}\r\n          onChange={e=>setQuery(e.target.value.trim().toLowerCase())}\r\n        />\r\n      </label>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useState, useMemo } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport FilterBar from \"../components/FilterBar.jsx\";\r\nimport { api } from \"../utils/api.js\";\r\n\r\nexport default function Boxes() {\r\n  const [boxes, setBoxes] = useState([]);\r\n  const [query, setQuery] = useState(\"\");\r\n  const [stat , setStat ] = useState(\"all\");\r\n  const [type , setType ] = useState(\"all\");\r\n  const [err  , setErr  ] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    api(\"/api/boxes\")\r\n      .then(r => r.json())\r\n      .then(setBoxes)\r\n      .catch(e => setErr(String(e)));\r\n  }, []);\r\n\r\n  const list = useMemo(() => boxes.filter(b => {\r\n    const q = query.toLowerCase();\r\n    return (stat===\"all\" || b.status===stat) &&\r\n           (type===\"all\" || b.type  ===type) &&\r\n           (q===\"\" ||\r\n            b.serial.toLowerCase().includes(q) ||\r\n            (b.deviceSerial ?? \"\").toLowerCase().includes(q));\r\n  }), [boxes, stat, type, query]);\r\n\r\n  const role = localStorage.getItem(\"role\");\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <h1 className=\"text-2xl font-bold\">\r\n        √úbersicht <span className=\"opacity-60\">{list.length}/{boxes.length}</span>\r\n      </h1>\r\n\r\n      <FilterBar {...{query,setQuery,stat:setStat,type:setType}} />\r\n\r\n      {err && <p className=\"text-error\">{err}</p>}\r\n\r\n      <div className=\"grid gap-4 md:grid-cols-2 xl:grid-cols-3\">\r\n        {list.map(b => (\r\n          <div key={b.id} className=\"card bg-base-100 shadow\">\r\n            <div className=\"card-body p-4\">\r\n              <h2 className=\"card-title\">\r\n                {b.serial} <span className=\"text-sm opacity-60\">({b.type})</span>\r\n              </h2>\r\n              <ul className=\"text-sm\">\r\n                <li>Status: {b.status}</li>\r\n                <li>Cycles: {b.cycles}</li>\r\n                <li>Device: {b.deviceSerial || \"‚Äî\"}</li>\r\n              </ul>\r\n              <div className=\"mt-2 flex gap-2\">\r\n                <Link to={`/box/${b.serial}`} className=\"btn btn-sm btn-primary\">\r\n                  Details\r\n                </Link>\r\n                {role === \"admin\" && (\r\n                  <Link to={`/boxmanage?id=${b.id}`} className=\"btn btn-sm\">\r\n                    Manage\r\n                  </Link>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n\r\n      {list.length === 0 && !err && (\r\n        <p className=\"opacity-60 text-center\">Keine Kisten gefunden ü§∑‚Äç‚ôÇÔ∏è</p>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":["FilterBar","status","setStatus","type","setType","query","setQuery","jsxs","e","jsx","Boxes","boxes","setBoxes","useState","stat","setStat","err","setErr","useEffect","api","r","list","useMemo","b","q","role","Link"],"mappings":"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"}