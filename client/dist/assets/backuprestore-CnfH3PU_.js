import{r as u,u as p,j as e}from"./index-Bq4TFxoM.js";import{a as l}from"./api-B34wtib_.js";function x(){const c=u.useRef(),[r,a]=u.useState(!1),i=p();async function b(){a(!0);try{const n=await(await l("/api/admin/backup")).blob(),t=URL.createObjectURL(n),s=document.createElement("a");s.href=t,s.download="boxtracker-backup.sqlite",s.click(),URL.revokeObjectURL(t)}finally{a(!1)}}async function d(o){o.preventDefault();const n=c.current.files[0];if(!n)return alert("Bitte Datei wählen.");if(confirm("Bestehende Datenbank überschreiben?")){a(!0);try{const t=new FormData;t.append("dump",n),await l("/api/admin/backup",{method:"PUT",body:t}),alert("Backup eingespielt – bitte neu anmelden."),localStorage.clear(),i("/login",{replace:!0})}finally{a(!1)}}}const f=()=>confirm("ALLE Daten löschen?")&&l("/api/admin/reset",{method:"POST"}).then(()=>{alert("Datenbank zurückgesetzt"),i("/boxes")});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Backup / Restore"}),e.jsx("button",{onClick:b,className:"btn btn-primary",disabled:r,children:r?"Bitte warten …":"Backup herunterladen"}),e.jsxs("form",{onSubmit:d,className:"flex gap-4 items-center flex-wrap",children:[e.jsx("input",{type:"file",ref:c,className:"file-input file-input-bordered"}),e.jsx("button",{className:"btn",disabled:r,children:"Wiederherstellen"})]}),e.jsx("button",{onClick:f,className:"btn btn-error",children:"Datenbank RESET"})]})}export{x as default};
//# sourceMappingURL=backuprestore-CnfH3PU_.js.map
