import{a as m,u as p,r as c,j as e,L as l}from"./index-Bq4TFxoM.js";import{a}from"./api-B34wtib_.js";function N(){const{id:r}=m(),d=p(),[s,o]=c.useState(null),[n,x]=c.useState(""),i=()=>a(`/api/boxes/${r}`).then(b=>b.json()).then(o).catch(()=>x("Kiste nicht gefunden"));if(c.useEffect(i,[r]),!s&&!n)return e.jsx("div",{className:"p-6",children:"Lade …"});if(n)return e.jsx("div",{className:"p-6 text-error",children:n});const h=localStorage.getItem("role"),t=s.departed?s.departed&&!s.returned?{label:"Zurücknehmen",api:"return",css:"accent"}:s.returned&&!s.is_checked?{label:"Prüfen",api:"check",css:"info"}:null:{label:"Auslagern",api:"load",css:"primary"},j=async()=>{t&&confirm(`${t.label}?`)&&(await a(`/api/boxes/${r}/${t.api}`,{method:"PUT"}),i())},u=async()=>{confirm("Kiste endgültig löschen?")&&(await a(`/api/boxes/${r}`,{method:"DELETE"}),d("/boxes"))};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:s.serial}),e.jsx("table",{className:"table w-auto",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{children:"Status"}),e.jsx("td",{children:s.status})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Cycles"}),e.jsx("td",{children:s.cycles})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Device"}),e.jsx("td",{children:s.deviceSerial||"—"})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Departed"}),e.jsx("td",{children:String(s.departed)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Returned"}),e.jsx("td",{children:String(s.returned)})]}),e.jsxs("tr",{children:[e.jsx("td",{children:"Checked"}),e.jsx("td",{children:s.is_checked?"✅":"—"})]})]})}),t&&e.jsx("button",{onClick:j,className:`btn btn-${t.css}`,children:t.label}),e.jsx(l,{to:`/box/${s.serial}/history`,className:"btn",children:"History"}),h==="admin"&&e.jsx("button",{onClick:u,className:"btn btn-error",children:"Löschen"}),e.jsx(l,{to:"/boxes",className:"link block mt-4",children:"← Zurück"})]})}export{N as default};
//# sourceMappingURL=boxdetail-pEbk2JJM.js.map
