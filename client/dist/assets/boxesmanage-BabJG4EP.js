import{r as l,j as e}from"./index-Bq4TFxoM.js";import{a as u}from"./api-B34wtib_.js";function g(){const[d,j]=l.useState([]),[t,o]=l.useState(new Set),[n,p]=l.useState("all"),[a,m]=l.useState("all"),h=()=>u("/api/boxes").then(s=>s.json()).then(j);l.useEffect(h,[]);const c=l.useMemo(()=>d.filter(s=>(n==="all"||s.status===n)&&(a==="all"||s.type===a)),[d,n,a]),b=s=>{const r=new Set(t);r.has(s)?r.delete(s):r.add(s),o(r)},i=async s=>{if(!t.size)return alert("Keine Box ausgewählt.");await u("/api/admin/boxes/bulk",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:[...t],action:s})}),o(new Set),h()},x=c.length>0&&c.every(s=>t.has(s.id));return e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Box-Pflege"}),e.jsxs("div",{className:"flex gap-4 flex-wrap items-center",children:[e.jsxs("select",{className:"select select-bordered",value:n,onChange:s=>p(s.target.value),children:[e.jsx("option",{value:"all",children:"Status: Alle"}),e.jsx("option",{value:"available",children:"Verfügbar"}),e.jsx("option",{value:"onTour",children:"Unterwegs"}),e.jsx("option",{value:"return",children:"Rücklauf"}),e.jsx("option",{value:"checked",children:"Geprüft"})]}),e.jsxs("select",{className:"select select-bordered",value:a,onChange:s=>m(s.target.value),children:[e.jsx("option",{value:"all",children:"Typ: Alle"}),e.jsx("option",{value:"PU-S",children:"PU-S"}),e.jsx("option",{value:"PU-M",children:"PU-M"}),e.jsx("option",{value:"PR-M",children:"PR-M"})]}),e.jsxs("span",{children:[t.size," ausgewählt"]})]}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>i("load"),className:"btn btn-sm btn-primary",children:"Auslagern"}),e.jsx("button",{onClick:()=>i("return"),className:"btn btn-sm btn-accent",children:"Zurücknehmen"}),e.jsx("button",{onClick:()=>i("check"),className:"btn btn-sm btn-info",children:"Prüfen"}),e.jsx("button",{onClick:()=>i("reset"),className:"btn btn-sm",children:"Reset"})]}),e.jsxs("table",{className:"table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:e.jsx("input",{type:"checkbox",checked:x,onChange:()=>o(x?new Set:new Set(c.map(s=>s.id)))})}),e.jsx("th",{children:"Serial"}),e.jsx("th",{children:"Typ"}),e.jsx("th",{children:"Status"}),e.jsx("th",{children:"Cycles"}),e.jsx("th",{children:"Device"})]})}),e.jsx("tbody",{children:c.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"checkbox",checked:t.has(s.id),onChange:()=>b(s.id)})}),e.jsx("td",{children:s.serial}),e.jsx("td",{children:s.type}),e.jsx("td",{children:s.status}),e.jsx("td",{children:s.cycles}),e.jsx("td",{children:s.deviceSerial||"—"})]},s.id))})]})]})}export{g as default};
//# sourceMappingURL=boxesmanage-BabJG4EP.js.map
