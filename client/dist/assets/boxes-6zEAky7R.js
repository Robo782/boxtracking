import{j as e,r as a,L as h}from"./index-Bq4TFxoM.js";import{a as g}from"./api-B34wtib_.js";function v({status:l,setStatus:n,type:r,setType:i,query:c,setQuery:o}){return e.jsxs("div",{className:"flex flex-wrap gap-2 items-center",children:[e.jsxs("select",{className:"select select-sm select-bordered",value:l,onChange:t=>n(t.target.value),children:[e.jsx("option",{value:"all",children:"Alle Status"}),e.jsx("option",{value:"Verf√ºgbar",children:"Verf√ºgbar"}),e.jsx("option",{value:"Unterwegs",children:"Unterwegs"}),e.jsx("option",{value:"R√ºcklauf",children:"R√ºcklauf"})]}),e.jsxs("select",{className:"select select-sm select-bordered",value:r,onChange:t=>i(t.target.value),children:[e.jsx("option",{value:"all",children:"Alle Typen"}),e.jsx("option",{value:"PU-S",children:"PU-S"}),e.jsx("option",{value:"PU-M",children:"PU-M"}),e.jsx("option",{value:"PR-M",children:"PR-M"})]}),e.jsx("label",{className:"input input-sm input-bordered flex-1 max-w-xs",children:e.jsx("input",{type:"text",placeholder:"PCC-ID / Device-Serial",className:"grow",value:c,onChange:t=>o(t.target.value.trim().toLowerCase())})})]})}function y(){const[l,n]=a.useState([]),[r,i]=a.useState(""),[c,o]=a.useState("all"),[t,p]=a.useState("all"),[d,m]=a.useState("");a.useEffect(()=>{g("/api/boxes").then(s=>s.json()).then(n).catch(s=>m(String(s)))},[]);const x=a.useMemo(()=>l.filter(s=>{const u=r.toLowerCase();return(c==="all"||s.status===c)&&(t==="all"||s.type===t)&&(u===""||s.serial.toLowerCase().includes(u)||(s.deviceSerial??"").toLowerCase().includes(u))}),[l,c,t,r]),j=localStorage.getItem("role");return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("h1",{className:"text-2xl font-bold",children:["√úbersicht ",e.jsxs("span",{className:"opacity-60",children:[x.length,"/",l.length]})]}),e.jsx(v,{query:r,setQuery:i,stat:o,type:p}),d&&e.jsx("p",{className:"text-error",children:d}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:x.map(s=>e.jsx("div",{className:"card bg-base-100 shadow",children:e.jsxs("div",{className:"card-body p-4",children:[e.jsxs("h2",{className:"card-title",children:[s.serial," ",e.jsxs("span",{className:"text-sm opacity-60",children:["(",s.type,")"]})]}),e.jsxs("ul",{className:"text-sm",children:[e.jsxs("li",{children:["Status: ",s.status]}),e.jsxs("li",{children:["Cycles: ",s.cycles]}),e.jsxs("li",{children:["Device: ",s.deviceSerial||"‚Äî"]})]}),e.jsxs("div",{className:"mt-2 flex gap-2",children:[e.jsx(h,{to:`/box/${s.serial}`,className:"btn btn-sm btn-primary",children:"Details"}),j==="admin"&&e.jsx(h,{to:`/boxmanage?id=${s.id}`,className:"btn btn-sm",children:"Manage"})]})]})},s.id))}),x.length===0&&!d&&e.jsx("p",{className:"opacity-60 text-center",children:"Keine Kisten gefunden ü§∑‚Äç‚ôÇÔ∏è"})]})}export{y as default};
//# sourceMappingURL=boxes-6zEAky7R.js.map
